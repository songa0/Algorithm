

```
function solution(board) {
    
    let queue = [[0,0,0,1,0]];
    let dx = [0,1,0,-1];
    let dy = [1,0,-1,0];
    let visited = [];
    const n = board.length;
    let answer = n*n;
    
    for(let i =0; i<n; i++){
        visited.push(new Array(n).fill(0));
    }
    
    visited[0][0] = 1;
    visited[0][1] = 1;
    dp(0,0,0,1,0);
    function dp(x1, y1, x2, y2, seq){
        
        //let [x1, y1, x2, y2, seq] = queue.shift();
        console.log(x1, y1, x2, y2, seq)
        if((x1===n-1 && y1 === n-1)||(x2===n-1 && y2 === n-1)){
            answer = Math.min(answer,seq);
            return;
        }
        for(let i =0; i<4; i++){
            let nx1 = x1+dx[i];
            let ny1= y1+dy[i];
            let nx2 = x2+dx[i];
            let ny2 = y2+dy[i];
            if(nx1>=0 && nx1<n && ny1>=0 && ny1<n 
               && nx2>=0 && nx2<n && ny2>=0 && ny2<n
               && board[nx1][ny1]===0 && board[nx2][ny2]===0
              ){
                if((i===1|| i===3) && (!visited[nx1][ny1]||visited[nx1][ny1]>seq) && (!visited[nx2][ny2]||visited[nx2][ny2]>seq)){
                    visited[nx1][ny1] = seq+1;
                visited[nx2][ny2] = seq+1;
                dp(nx1, ny1, nx2, ny2, seq+1);
                visited[nx1][ny1] = 0;
                visited[nx2][ny2] = 0;
                    
                }else if((i===0||i===3)&&((!visited[nx1][ny1]||visited[nx1][ny1]>seq) || (!visited[nx2][ny2]||visited[nx2][ny2]>seq))){
                    visited[nx1][ny1] = seq+1;
                visited[nx2][ny2] = seq+1;
                dp(nx1, ny1, nx2, ny2, seq+1);
                visited[nx1][ny1] = 0;
                visited[nx2][ny2] = 0;
                    
                }
                
            }
        }
        
        if(x1===x2){
            
            if(x2-1>=0 && (!visited[x2-1][y2]||visited[x2-1][y2]>seq) && board[x2-1][y2]===0 && board[x1-1][y1]===0 ){
                visited[x2-1][y2] = seq+1;
                dp(x2-1, y2, x2, y2, seq+1);
                visited[x2-1][y2] = 0;
            }
            if(x2+1<n && (!visited[x2+1][y2]||visited[x2+1][y2]>seq)&& board[x2+1][y2]===0 && board[x1+1][y1]===0){
                visited[x2+1][y2] = seq+1;
                dp(x2+1,y2,x2,y2, seq+1);
                visited[x2+1][y2] = 0
            }
            if(x1-1>=0 && (!visited[x1-1][y1]||visited[x1-1][y1]>seq) && board[x1-1][y1]===0 &&board[x2-1][y2]===0){
                visited[x1-1][y1] = seq+1;
                dp(x1, y1, x1-1, y1, seq+1);
                visited[x1-1][y1] = 0;
            }
            if(x1+1<n && (!visited[x1+1][y1]||visited[x1+1][y1]>seq) &&board[x1+1][y1]===0 &&board[x2+1][y2]===0){
                visited[x1+1][y1] = seq+1;
                dp(x1, y1, x1+1, y1, seq+1);
                visited[x1+1][y1] = 0;
            }
            
        }else if(y1 === y2){
            
            if(y2-1>=0 && (!visited[x2][y2-1]||visited[x2][y2-1]>seq) && board[x2][y2-1] ===0&& board[x1][y1-1]===0 ){
                visited[x2][y2-1] = seq+1;
                dp(x2, y2-1, x2, y2, seq+1);
                visited[x2][y2-1] = 0;
            }
            if(y2+1<n && (!visited[x2][y2+1]||visited[x2][y2+1]>seq) && board[x2][y2+1] ===0&&board[x1][y1+1]===0){
                visited[x2][y2+1] = seq+1;
                dp(x2,y2+1,x2,y2, seq+1);
                visited[x2][y2+1] = 0;
            }
            if(y1-1>=0 && (!visited[x1][y1-1]||visited[x1][y1-1]>seq) && board[x1][y1-1] ===0&& board[x2][y2-1]===0){
                visited[x1][y1-1] = seq+1;
                dp(x1, y1, x1, y1-1, seq+1);
                visited[x1][y1-1] = 0;
            }
            if(y1+1<n && (!visited[x1][y1+1]||visited[x1][y1+1]>seq) && board[x1][y1+1] ===0&&board[x2][y2+1]===0){
                visited[x1][y1+1] = seq+1;
                dp(x1, y1, x1, y1+1, seq+1);
                visited[x1][y1+1] = 0;
            }
        }        
        
    }
    
    return answer;
}

```
